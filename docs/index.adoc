= Postsvg Documentation
:page-layout: home
:page-title: Postsvg - Pure Ruby PostScript to SVG Converter
:page-description: Convert PostScript and EPS files to SVG using pure Ruby
:page-nav_order: 1

image:https://img.shields.io/gem/v/postsvg.svg[Gem Version,link=https://rubygems.org/gems/postsvg]
image:https://github.com/metanorma/postsvg/actions/workflows/test.yml/badge.svg[Build Status,link=https://github.com/metanorma/postsvg/actions/workflows/test.yml]
image:https://img.shields.io/github/license/metanorma/postsvg.svg[License,link=https://opensource.org/licenses/BSD-2-Clause]

== Purpose

Postsvg is a pure Ruby library for converting PostScript (PS) and Encapsulated PostScript (EPS) files to Scalable Vector Graphics (SVG) format.

Unlike traditional approaches that rely on external tools like Ghostscript or Inkscape, Postsvg provides a native Ruby implementation with no external dependencies, making it ideal for:

* Converting legacy PostScript graphics to modern SVG format
* Processing vector graphics without external dependencies
* Generating SVG from PostScript programmatically
* Working with EPS files in pure Ruby environments
* CI/CD pipelines requiring PostScript validation

== References

* link:https://github.com/metanorma/postsvg[GitHub Repository]
* link:https://rubygems.org/gems/postsvg[RubyGems Package]
* link:https://github.com/metanorma/postsvg/issues[Issue Tracker]

== Quick Start

[source,sh]
----
# Install the gem
gem install postsvg

# Convert a file
postsvg convert input.eps output.svg

# Batch convert a directory
postsvg batch ps_files/ svg_files/

# Validate PostScript files
postsvg check document.ps --level=full
----

[source,ruby]
----
require 'postsvg'

# Convert PostScript content
ps_content = File.read('input.ps')
svg = Postsvg.convert(ps_content)

# Convert and save a file
Postsvg.convert_file('input.eps', 'output.svg')
----

== Documentation Sections

link:getting-started.adoc[**Getting Started**]::
Installation instructions, basic usage patterns, and your first conversion tutorial.

link:concepts.adoc[**Core Concepts**]::
Understand the conversion pipeline, graphics state management, coordinate systems, and PostScript fundamentals.

link:api-reference.adoc[**API Reference**]::
Complete Ruby API documentation covering all classes, methods, and their parameters.

link:cli-reference.adoc[**CLI Reference**]::
Command-line interface documentation with detailed usage examples and options.

link:postscript.adoc[**PostScript Language**]::
Comprehensive PostScript operator reference, language fundamentals, and SVG mapping guide.

link:validation.adoc[**Validation System**]::
File validation tools, quality checks, validation levels, and CI/CD integration patterns.

link:optimization.adoc[**SVG Optimization**]::
Automatic optimization features including clipPath deduplication and performance tuning.

link:architecture.adoc[**Architecture**]::
Internal architecture, three-stage conversion pipeline, design patterns, and implementation details.

link:advanced-topics.adoc[**Advanced Topics**]::
Custom operators, strict mode, error handling, and advanced usage patterns.

link:development.adoc[**Development Guide**]::
Contributing guidelines, testing procedures, code style, and extending Postsvg.

link:troubleshooting.adoc[**Troubleshooting**]::
Common issues, error messages, and solutions.

link:quick-reference.adoc[**Quick Reference**]::
Fast access to commonly used commands, API methods, and workflows. Perfect for experienced users.

link:faq.adoc[**FAQ**]::
Frequently asked questions about Postsvg usage and capabilities.

== Key Features

**Pure Ruby Implementation**::
No external dependencies on Ghostscript, Inkscape, or other tools. Works in any Ruby environment.

**Comprehensive CLI**::
Convert single files or batch process entire directories with a simple command-line interface.

**Advanced Validation**::
Three validation levels (syntax, semantic, full) with multiple output formats (text, YAML, JSON).

**Automatic Optimization**::
ClipPath deduplication and path simplification for smaller, cleaner SVG output.

**Extensive Operator Support**::
150+ PostScript operator implementations covering path construction, painting, graphics state, transformations, and more.

**Well-Tested**::
90+ core tests with 100% pass rate on critical paths, ensuring reliable conversion.

**Standards-Compliant**::
Generates clean, standards-compliant SVG that works across all modern browsers and tools.

== Example Conversion

.Input PostScript
[source,postscript]
----
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: 0 0 100 100
newpath
10 10 moveto
90 10 lineto
90 90 lineto
10 90 lineto
closepath
0.5 0.5 0.5 setrgbcolor
fill
----

.Output SVG
[source,xml]
----
<svg xmlns="http://www.w3.org/2000/svg"
     width="100" height="100"
     viewBox="0 0 100 100">
  <path d="M 10 90 L 90 90 L 90 10 L 10 10 Z"
        fill="#808080"/>
</svg>
----

== Supported PostScript Operations

[cols="1,3"]
|===
| Category | Operators

| Path Construction
| `moveto`, `lineto`, `rlineto`, `curveto`, `closepath`, `newpath`

| Painting
| `stroke`, `fill`, `eofill`, `clip`, `eoclip`

| Color
| `setrgbcolor`, `setgray`, `setcmykcolor`

| Graphics State
| `gsave`, `grestore`, `setlinewidth`, `setlinecap`, `setlinejoin`, `setdash`

| Transformations
| `translate`, `scale`, `rotate`, `concat`, `matrix`

| Stack Operations
| `dup`, `pop`, `exch`, `roll`, `copy`, `index`, `clear`

| Arithmetic
| `add`, `sub`, `mul`, `div`, `mod`, `abs`, `neg`, `sin`, `cos`

| Control Flow
| `if`, `ifelse`, `for`, `repeat`, `loop`, `exit`, `stopped`

| Dictionary
| `dict`, `begin`, `end`, `def`, `load`, `store`, `where`
|===

For the complete operator reference, see link:postscript/operators/index.adoc[PostScript Operators].

== Current Limitations

* **Text rendering**: Text operations (`show`, `findfont`, `setfont`) are not yet supported. Convert text to outlines before processing.
* **Complex clipping**: Advanced clipping paths are partially implemented.
* **Gradients and patterns**: Pattern fills and gradient operations are not yet supported.
* **CMYK colors**: Only RGB and grayscale colors are fully supported.
* **Image embedding**: Raster images within PostScript (`image`, `imagemask`) are not supported.
* **Advanced operators**: Some PostScript Level 2 and 3 operators are not yet implemented.

For files with these features, consider preprocessing with external tools or link:contributing.adoc[contributing implementations].

== Community and Support

**Getting Help**::
* Check the link:troubleshooting.adoc[Troubleshooting Guide]
* Review link:faq.adoc[Frequently Asked Questions]
* Search existing link:https://github.com/metanorma/postsvg/issues[GitHub Issues]
* Create a link:https://github.com/metanorma/postsvg/issues/new[new issue] if needed

**Contributing**::
* Read the link:contributing.adoc[Contributing Guide]
* Review link:development.adoc[Development Documentation]
* Submit link:https://github.com/metanorma/postsvg/pulls[Pull Requests]

**Stay Updated**::
* Watch the link:https://github.com/metanorma/postsvg[GitHub repository]
* Review the link:changelog.adoc[Changelog] for version updates
== Additional Resources

link:quick-reference.adoc[**Quick Reference**]::
One-page cheat sheet with all commonly used commands, API methods, and workflows.

link:sitemap.adoc[**Site Map**]::
Complete overview of all documentation organized by topic and user type.

link:DOCUMENTATION_PLAN.md[**Documentation Plan**]::
Roadmap showing current status and future enhancements.


== License

Postsvg is available as open source under the terms of the link:https://opensource.org/licenses/BSD-2-Clause[BSD 2-Clause License].

== Acknowledgments

This project uses test fixtures from link:https://github.com/elalish/ps2svg[ps2svg] by Emmett Lalish, licensed under the MIT License. These test files help ensure the correctness of our SVG generation against a reference implementation.

== Bibliography

* Adobe Systems Incorporated. _PostScript Language Reference_, 3rd Edition
* link:https://www.w3.org/TR/SVG/[SVG Specification] - W3C Recommendation
* link:https://github.com/elalish/ps2svg[ps2svg] - Reference implementation
* link:https://www.adobe.com/products/postscript/pdfs/PLRM.pdf[PostScript Language Reference Manual]